<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>TSL Buildlab</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://unpkg.com/blockly/blockly.min.js"></script>
    <link href="assets/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="./styles.css" rel="stylesheet">
</head>

<body>
<div class="row mx-auto">
    <div class = "col-8">
        <div class="col-lg-12 mx-auto p-2 py-md-2" id="title">
            <h1>TSL Buildlab</h1>
            <br>
            <p class="fs-5 col-md-8">Run TSL Synthesis from your browser:</p>
            <p class="fs-5 col-md-8">1. Press "Run Synthesis"</p>
            <p class="fs-5 col-md-8">2. Change the tslBlocks, rinse and repeat!</p>

            <button type="submit" class="btn btn-primary" style ="background-color:red; border-color:red" onclick="call()">Run Synthesis</button> <button type="button" class="btn btn-primary" id="documentation" data-toggle="modal" data-target="#smaplemodal" data-backdrop="false">Documentation</button>
            <!-- The Modal -->
            <div class="modal custom-modal fade" id="smaplemodal">
                <div class="modal-dialog">
                    <div class="modal-content">

                        <!-- Modal Header -->
                        <div class="modal-header">
                            <h4 class="modal-title">TSL x Three.js Documentation</h4>
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                        </div>

                        <!-- Modal body -->
                        <div class="modal-body">
                            <h5>shapes</h5>
                            <ul>
                                <li>cube</li>
                                <li>sphere</li>
                                <li>polygon</li>
                            </ul>
                            <h5>Three.js shape properties</h5>
                            <ul>
                                <li><a href="https://threejs.org/docs/#api/en/core/Object3D.rotation" target="_blank">shape.rotation</a>: default THREE.Euler(0, 0, 0)</li>
                                <li><a href="https://threejs.org/docs/#api/en/core/Object3D.scale" target="_blank">shape.scale</a>: default THREE.Vector3(1, 1, 1)</li>
                                <li><a href="https://threejs.org/docs/#api/en/core/Object3D.position" target="_blank">shape.position</a>: default THREE.Vector3(2, 2, 0)</li>
                                <li>cubeColor: default THREE.Color(255, 255, 255)</li>
                                <li>sphereColor: default THREE.Color(255, 255, 255)</li>
                                <li>polyColor: default THREE.Color(255, 255, 255)</li>
                            </ul>
                            <h5>functions</h5>
                            <ul>
                                <li>sin(x): sin wave of x in radians</li>
                                <li>saw(x): saw wave of x in radians</li>
                                <li>color(r, g, b): THREE.Color(r, g, b)</li>
                            </ul>
                            <h5>primitives</h5>
                            <ul>
                                <li>t: increments by 1 every timestep</li>
                                <li>count: default at 0</li>
                                <li>rand: random number between 0 and 1 at every timestep</li>
                            </ul>
                            <h5>events</h5>
                            <ul>
                                <li>pressL(e): left arrow press</li>
                                <li>pressR(e): right arrow press</li>
                                <li>pressUp(e): up arrow press</li>
                                <li>pressDown(e): down arrow press</li>
                                <li>pressSpace(e): space bar press</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col mx-auto p-2 py-md-4">
        <div class="render">
            <p id = "render">Render the animation here</p>
        </div>
    </div>
</div>
<div class="row mx-auto"><div class="col-3">
    <p>Build a TSL spec here</p>
    <div id="blocklyDiv" style="height: 480px; width: 280%;"></div>
    <xml xmlns="https://developers.google.com/blockly/xml" id="toolbox" style="display: none">
        <category name="Temporal Operators" colour="#e8860e">
            <block type="logic_2input">
                <field name="operator">&amp;&amp;</field>
            </block>
            <block type="logic_1input">
                <field name="operator">F</field>
            </block>
            <block type="mut_ex">
                <field name="in1">pressRight</field>
                <field name="in2">right</field>
            </block>
        </category>
        <category name="Blocks" colour="#e6b710">
            <block type="assumeguarantee"></block>
            <block type="start"></block>
        </category>
        <category name="Update Terms" colour="#34bf4b">
            <block type="new">
                <field name="shapes">cubeColor</field>
                <field name="fst">0</field>
                <field name="snd">0</field>
                <field name="trd">0</field>
            </block>
            <block type="var_man">
                <field name="ops">plus</field>
            </block>
            <block type="update"></block>
        </category>
        <sep></sep>
        <category name="Inputs" colour="#ba56a3">
            <block type="insignal">
                <field name="signIn">l</field>
            </block>
        </category>
        <category name="Outputs" colour="#20b0d4">
            <block type="vars">
                <field name="vars">count</field>
            </block>
            <block type="cube_rot">
                <field name="cube_rot">rot_x</field>
            </block>
            <block type="cube_pos">
                <field name="cube_pos">rot_x</field>
            </block>
            <block type="cube_scale">
                <field name="cube_scale">rot_x</field>
            </block>
            <block type="poly_rot">
                <field name="poly_rot">rot_x</field>
            </block>
            <block type="poly_pos">
                <field name="poly_pos">rot_x</field>
            </block>
            <block type="poly_scale">
                <field name="poly_scale">rot_x</field>
            </block>
            <block type="sphere_rot">
                <field name="sphere_rot">rot_x</field>
            </block>
            <block type="sphere_pos">
                <field name="sphere_pos">rot_x</field>
            </block>
            <block type="sphere_scale">
                <field name="sphere_scale">rot_x</field>
            </block>
        </category>
        <category name="Functions" colour="#4a88d9">
            <block type="sinsaw">
                <field name="sin">sin</field>
            </block>
        </category>
        <category name="Math" colour="#7352bf">
            <block type="math_number">
                <field name="NUM">0</field>
            </block>
            <block type="math">
                <field name="ops">plus</field>
            </block>
            <block type="math_random_int" colour="#7352bf">
                <value name="FROM">
                    <shadow type="math_number">
                        <field name="NUM">1</field>
                    </shadow>
                </value>
                <value name="TO">
                    <shadow type="math_number">
                        <field name="NUM">255</field>
                    </shadow>
                </value>
            </block>
        </category>
    </xml>
    <xml xmlns="https://developers.google.com/blockly/xml" id="workspaceBlocks" style="display: none">
        <block type="assumeguarantee" id="mWU%B1vpQIV%TTSkv:q%" x="12" y="12">
            <statement name="assume">
                <block type="mut_ex" id="Y-=CxU[E6*2ZU*]iBsE-">
                    <field name="in1">pressL(e)</field>
                    <field name="in2">pressR(e)</field>
                </block>
            </statement>
            <statement name="guarantee">
                <block type="start" id="x}R#m6|M371/;-(7}_*#">
                    <value name="NAME">
                        <block type="logic_2input" id="m8Y2jWTmdK{2}M%j$h;I">
                            <field name="operator">-&gt;</field>
                            <value name="left">
                                <block type="insignal" id="ZrQ|LgKjm3$p8eD,v8pq">
                                    <field name="signIn">pressL(e)</field>
                                </block>
                            </value>
                            <value name="right">
                                <block type="logic_2input" id="Cf%Lq!i!lPW3t]7qz0[L">
                                    <field name="operator">W</field>
                                    <value name="left">
                                        <block type="var_man" id="In1D*e%*hv2xIfp5|$Ad">
                                            <field name="op">+</field>
                                            <field name="NAME">0.1</field>
                                            <value name="var">
                                                <block type="cube_rot" id="o4GD.pvZ(=oKbB)OH,Q(">
                                                    <field name="cube_rot">cube.rotation.y</field>
                                                </block>
                                            </value>
                                            <value name="var1">
                                                <block type="cube_rot" id="o~rCzI^mc8fw(knT;THT" x="0" y="0">
                                                    <field name="cube_rot">cube.rotation.y</field>
                                                </block>
                                            </value>
                                        </block>
                                    </value>
                                    <value name="right">
                                        <block type="insignal" id="J]MOd.Ghm{yC1qGJCcs/">
                                            <field name="signIn">pressR(e)</field>
                                        </block>
                                    </value>
                                </block>
                            </value>
                        </block>
                    </value>
                    <next>
                        <block type="start" id="^Ct!Srxi#D{4@J!p*F:H">
                            <value name="NAME">
                                <block type="logic_2input" id="3k7#QmtaG)L!D`xt!9=@">
                                    <field name="operator">-&gt;</field>
                                    <value name="left">
                                        <block type="insignal" id="yW}tlrH~]Bmzrt}~,#w/">
                                            <field name="signIn">pressR(e)</field>
                                        </block>
                                    </value>
                                    <value name="right">
                                        <block type="logic_2input" id="2}9|Zmj)]qKOC:K-%QhP">
                                            <field name="operator">W</field>
                                            <value name="left">
                                                <block type="var_man" id="Eq3R5.tJkDi?|y,Y]/ZC">
                                                    <field name="op">-</field>
                                                    <field name="NAME">0.1</field>
                                                    <value name="var">
                                                        <block type="cube_rot" id="$)sCC{zVCtpsIpTi+hTN">
                                                            <field name="cube_rot">cube.rotation.y</field>
                                                        </block>
                                                    </value>
                                                    <value name="var1">
                                                        <block type="cube_rot" id="o~rCzI^mc8fw(knT;THT" x="0" y="0">
                                                            <field name="cube_rot">cube.rotation.y</field>
                                                        </block>
                                                    </value>
                                                </block>
                                            </value>
                                            <value name="right">
                                                <block type="insignal" id=":$UWI2x|G?N(/,2}D,NL">
                                                    <field name="signIn">pressL(e)</field>
                                                </block>
                                            </value>
                                        </block>
                                    </value>
                                </block>
                            </value>
                            <next>
                                <block type="start" id="}c^[`hq$y7SMdVvZ/[9o" x="13" y="188">
                                    <value name="NAME">
                                        <block type="new" id="dSuxp46?]8*m}98@60HI">
                                            <field name="shapes">cubeColor</field>
                                            <field name="fst">255</field>
                                            <field name="snd">0</field>
                                            <field name="trd">100</field>
                                        </block>
                                    </value>
                                </block>
                            </next>
                        </block>
                    </next>
                </block>
            </statement>
        </block>
    </xml>
</div>
    <div class="col-3 offset-5">
        <p>Get the JavaScript code here</p>
        <textarea class="input-xlarge" id="codeBox" rows="10" spellcheck="false" style="min-width:100%; height:93%"></textarea>
    </div></div>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script src="https://unpkg.com/three"></script>
<script src="blocks/json.js"></script>
<script src="blocks/generator.js"></script>
<script src="blocks.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://code.jquery.com/ui/1.11.3/jquery-ui.min.js"></script>
<script src="functions.js"></script>
<script src="animations.js"></script>
<script src="synth.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
</body>
</html>

