<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>TSL Buildlab</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://unpkg.com/blockly/blockly.min.js"></script>
    <link href="assets/dist/css/bootstrap.min.css" rel="stylesheet">
    <style src="blocks.css"></style>
</head>

<body>
<div class="col-lg-12 mx-auto p-2 py-md-3">
<h1>TSL Buildlab</h1>
<br>
<p class="fs-5 col-md-8">Run TSL Synthesis from your browser:</p>
<p class="fs-5 col-md-8">1. Press "Run Synthesis"</p>
<p class="fs-5 col-md-8">2. Change the tslBlocks, rinse and repeat!</p>

<button type="submit" class="btn btn-primary" style ="background-color:red; border-color:red" onclick="callSynth()">Run Synthesis</button>
</div>
<div class="row mx-auto"><div class="col-3">
<p>Build a TSL spec here</p>
<div id="blocklyDiv" style="height: 480px; width: 280%;"></div>
<xml xmlns="https://developers.google.com/blockly/xml" id="toolbox" style="display: none">
    <category name="Temporal Operators" colour="#e8860e">
        <block type="logic_2input">
            <field name="operator">&amp;&amp;</field>
        </block>
        <block type="logic_1input">
            <field name="operator">F</field>
        </block>
        <block type="mut_ex">
            <field name="in1">pressRight</field>
            <field name="in2">right</field>
        </block>
    </category>
    <category name="Blocks" colour="#e6b710">
        <block type="assumeguarantee"></block>
        <block type="start"></block>
    </category>
    <category name="Update Terms" colour="#34bf4b">
        <block type="new">
            <field name="shapes">cubeColor</field>
            <field name="fst">0</field>
            <field name="snd">0</field>
            <field name="trd">0</field>
        </block>
        <block type="var_man">
            <field name="ops">plus</field>
        </block>
        <block type="update"></block>
    </category>
    <sep></sep>
    <category name="Inputs" colour="#ba56a3">
        <block type="insignal">
            <field name="signIn">l</field>
        </block>
    </category>
    <category name="Outputs" colour="#20b0d4">
        <block type="vars">
            <field name="vars">count</field>
        </block>
        <block type="cube_rot">
            <field name="cube_rot">rot_x</field>
        </block>
        <block type="cube_pos">
            <field name="cube_pos">rot_x</field>
        </block>
        <block type="cube_scale">
            <field name="cube_scale">rot_x</field>
        </block>
        <block type="poly_rot">
            <field name="poly_rot">rot_x</field>
        </block>
        <block type="poly_pos">
            <field name="poly_pos">rot_x</field>
        </block>
        <block type="poly_scale">
            <field name="poly_scale">rot_x</field>
        </block>
        <block type="sphere_rot">
            <field name="sphere_rot">rot_x</field>
        </block>
        <block type="sphere_pos">
            <field name="sphere_pos">rot_x</field>
        </block>
        <block type="sphere_scale">
            <field name="sphere_scale">rot_x</field>
        </block>
    </category>
    <category name="Functions" colour="#4a88d9">
        <block type="sinsaw">
            <field name="sin">sin</field>
        </block>
    </category>
    <category name="Math" colour="#7352bf">
        <block type="math_number">
            <field name="NUM">0</field>
        </block>
        <block type="math">
            <field name="ops">plus</field>
        </block>
        <block type="math_random_int" colour="#7352bf">
            <value name="FROM">
                <shadow type="math_number">
                    <field name="NUM">1</field>
                </shadow>
            </value>
            <value name="TO">
                <shadow type="math_number">
                    <field name="NUM">255</field>
                </shadow>
            </value>
        </block>
    </category>
</xml>
<xml xmlns="https://developers.google.com/blockly/xml" id="workspaceBlocks" style="display: none">
    <block type="assumeguarantee" id="mWU%B1vpQIV%TTSkv:q%" x="12" y="12">
        <statement name="assume">
            <block type="mut_ex" id="Y-=CxU[E6*2ZU*]iBsE-">
                <field name="in1">pressL(e)</field>
                <field name="in2">pressR(e)</field>
            </block>
        </statement>
        <statement name="guarantee">
            <block type="start" id="x}R#m6|M371/;-(7}_*#">
                <value name="NAME">
                    <block type="logic_2input" id="m8Y2jWTmdK{2}M%j$h;I">
                        <field name="operator">-&gt;</field>
                        <value name="left">
                            <block type="insignal" id="ZrQ|LgKjm3$p8eD,v8pq">
                                <field name="signIn">pressL(e)</field>
                            </block>
                        </value>
                        <value name="right">
                            <block type="logic_2input" id="Cf%Lq!i!lPW3t]7qz0[L">
                                <field name="operator">W</field>
                                <value name="left">
                                    <block type="var_man" id="In1D*e%*hv2xIfp5|$Ad">
                                        <field name="op">+</field>
                                        <field name="NAME">1</field>
                                        <value name="var">
                                            <block type="cube_rot" id="o4GD.pvZ(=oKbB)OH,Q(">
                                                <field name="cube_rot">cube.rotation.x</field>
                                            </block>
                                        </value>
                                        <value name="var1">
                                            <block type="cube_rot" id="o~rCzI^mc8fw(knT;THT" x="0" y="0">
                                                <field name="cube_rot">cube.rotation.x</field>
                                            </block>
                                        </value>
                                    </block>
                                </value>
                                <value name="right">
                                    <block type="insignal" id="J]MOd.Ghm{yC1qGJCcs/">
                                        <field name="signIn">pressR(e)</field>
                                    </block>
                                </value>
                            </block>
                        </value>
                    </block>
                </value>
                <next>
                    <block type="start" id="^Ct!Srxi#D{4@J!p*F:H">
                        <value name="NAME">
                            <block type="logic_2input" id="3k7#QmtaG)L!D`xt!9=@">
                                <field name="operator">-&gt;</field>
                                <value name="left">
                                    <block type="insignal" id="yW}tlrH~]Bmzrt}~,#w/">
                                        <field name="signIn">pressR(e)</field>
                                    </block>
                                </value>
                                <value name="right">
                                    <block type="logic_2input" id="2}9|Zmj)]qKOC:K-%QhP">
                                        <field name="operator">W</field>
                                        <value name="left">
                                            <block type="var_man" id="Eq3R5.tJkDi?|y,Y]/ZC">
                                                <field name="op">-</field>
                                                <field name="NAME">1</field>
                                                <value name="var">
                                                    <block type="cube_rot" id="$)sCC{zVCtpsIpTi+hTN">
                                                        <field name="cube_rot">cube.rotation.x</field>
                                                    </block>
                                                </value>
                                                <value name="var1">
                                                    <block type="cube_rot" id="o~rCzI^mc8fw(knT;THT" x="0" y="0">
                                                        <field name="cube_rot">cube.rotation.x</field>
                                                    </block>
                                                </value>
                                            </block>
                                        </value>
                                        <value name="right">
                                            <block type="insignal" id=":$UWI2x|G?N(/,2}D,NL">
                                                <field name="signIn">pressL(e)</field>
                                            </block>
                                        </value>
                                    </block>
                                </value>
                            </block>
                        </value>
                    </block>
                </next>
            </block>
        </statement>
    </block>
</xml>
    </div>
<div class="col-3 offset-5">
    <p>Get the JavaScript code here</p>
    <textarea class="input-xlarge" id="codeBox" rows="10" spellcheck="false" style="min-width:100%; height:93%"></textarea>
</div>
<script src="blocks/json.js"></script>
<script src="blocks/generator.js"></script>
<script src="blocks.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://code.jquery.com/ui/1.11.3/jquery-ui.min.js"></script>
<script src="synth.js"></script>
</body>
</html>

